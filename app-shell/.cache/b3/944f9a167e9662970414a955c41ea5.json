{"id":"ZNVD","dependencies":[{"name":"C:\\D\\projects\\PiralPocUsingCli\\app-shell\\node_modules\\piral-base\\esm\\setup.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\D\\projects\\PiralPocUsingCli\\app-shell\\node_modules\\piral-base\\src\\setup.ts","includedInParent":true,"mtime":499162500000},{"name":"C:\\D\\projects\\PiralPocUsingCli\\app-shell\\package.json","includedInParent":true,"mtime":1619359868439},{"name":"C:\\D\\projects\\PiralPocUsingCli\\app-shell\\node_modules\\piral-base\\package.json","includedInParent":true,"mtime":499162500000}],"generated":{"js":"\"use strict\";function e(e,t){try{var n=e.setup(t);if(\"function\"==typeof e.teardown){var r=function(n){n.name===e.name&&(t.off(\"unload-pilet\",r),e.teardown(t))};t.on(\"unload-pilet\",r)}return n}catch(o){console.error(\"Error while setting up \"+(null==e?void 0:e.name)+\".\",o)}}function t(e,t){try{return e.setup(t)}catch(n){console.error(\"Error while setting up \"+(null==e?void 0:e.name)+\".\",n)}}function n(n,r){return\"bundle\"in n?t(n,r):e(n,r(n))}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.setupSinglePilet=e,exports.setupMultiPilet=t,exports.setupPilet=n;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":0}},{"source":"../src/setup.ts","name":null,"original":{"line":9,"column":6},"generated":{"line":1,"column":13}},{"source":"../src/setup.ts","name":null,"original":{"line":9,"column":16},"generated":{"line":1,"column":22}},{"source":"../src/setup.ts","name":null,"original":{"line":9,"column":33},"generated":{"line":1,"column":24}},{"source":"../src/setup.ts","name":null,"original":{"line":9,"column":51},"generated":{"line":1,"column":26}},{"source":"../src/setup.ts","name":null,"original":{"line":10,"column":6},"generated":{"line":1,"column":29}},{"source":"../src/setup.ts","name":null,"original":{"line":11,"column":10},"generated":{"line":1,"column":33}},{"source":"../src/setup.ts","name":null,"original":{"line":11,"column":10},"generated":{"line":1,"column":37}},{"source":"../src/setup.ts","name":null,"original":{"line":11,"column":19},"generated":{"line":1,"column":39}},{"source":"../src/setup.ts","name":null,"original":{"line":11,"column":23},"generated":{"line":1,"column":41}},{"source":"../src/setup.ts","name":null,"original":{"line":11,"column":29},"generated":{"line":1,"column":47}},{"source":"../src/setup.ts","name":null,"original":{"line":13,"column":8},"generated":{"line":1,"column":50}},{"source":"../src/setup.ts","name":null,"original":{"line":13,"column":32},"generated":{"line":1,"column":53}},{"source":"../src/setup.ts","name":null,"original":{"line":13,"column":15},"generated":{"line":1,"column":72}},{"source":"../src/setup.ts","name":null,"original":{"line":13,"column":19},"generated":{"line":1,"column":74}},{"source":"../src/setup.ts","name":null,"original":{"line":13,"column":44},"generated":{"line":1,"column":83}},{"source":"../src/setup.ts","name":null,"original":{"line":14,"column":12},"generated":{"line":1,"column":84}},{"source":"../src/setup.ts","name":null,"original":{"line":15,"column":12},"generated":{"line":1,"column":88}},{"source":"../src/setup.ts","name":null,"original":{"line":15,"column":22},"generated":{"line":1,"column":90}},{"source":"../src/setup.ts","name":null,"original":{"line":15,"column":23},"generated":{"line":1,"column":99}},{"source":"../src/setup.ts","name":null,"original":{"line":16,"column":12},"generated":{"line":1,"column":102}},{"source":"../src/setup.ts","name":null,"original":{"line":16,"column":14},"generated":{"line":1,"column":104}},{"source":"../src/setup.ts","name":null,"original":{"line":16,"column":23},"generated":{"line":1,"column":111}},{"source":"../src/setup.ts","name":null,"original":{"line":16,"column":27},"generated":{"line":1,"column":113}},{"source":"../src/setup.ts","name":null,"original":{"line":17,"column":10},"generated":{"line":1,"column":120}},{"source":"../src/setup.ts","name":null,"original":{"line":17,"column":14},"generated":{"line":1,"column":122}},{"source":"../src/setup.ts","name":null,"original":{"line":14,"column":22},"generated":{"line":1,"column":126}},{"source":"../src/setup.ts","name":null,"original":{"line":17,"column":27},"generated":{"line":1,"column":141}},{"source":"../src/setup.ts","name":null,"original":{"line":18,"column":10},"generated":{"line":1,"column":144}},{"source":"../src/setup.ts","name":null,"original":{"line":18,"column":14},"generated":{"line":1,"column":146}},{"source":"../src/setup.ts","name":null,"original":{"line":18,"column":23},"generated":{"line":1,"column":155}},{"source":"../src/setup.ts","name":null,"original":{"line":21,"column":6},"generated":{"line":1,"column":160}},{"source":"../src/setup.ts","name":null,"original":{"line":21,"column":10},"generated":{"line":1,"column":162}},{"source":"../src/setup.ts","name":null,"original":{"line":14,"column":22},"generated":{"line":1,"column":165}},{"source":"../src/setup.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":180}},{"source":"../src/setup.ts","name":null,"original":{"line":24,"column":11},"generated":{"line":1,"column":183}},{"source":"../src/setup.ts","name":null,"original":{"line":24,"column":11},"generated":{"line":1,"column":190}},{"source":"../src/setup.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":192}},{"source":"../src/setup.ts","name":null,"original":{"line":25,"column":11},"generated":{"line":1,"column":198}},{"source":"../src/setup.ts","name":null,"original":{"line":26,"column":4},"generated":{"line":1,"column":201}},{"source":"../src/setup.ts","name":null,"original":{"line":26,"column":12},"generated":{"line":1,"column":209}},{"source":"../src/setup.ts","name":null,"original":{"line":26,"column":18},"generated":{"line":1,"column":215}},{"source":"../src/setup.ts","name":null,"original":{"line":26,"column":44},"generated":{"line":1,"column":242}},{"source":"../src/setup.ts","name":null,"original":{"line":26,"column":44},"generated":{"line":1,"column":248}},{"source":"../src/setup.ts","name":null,"original":{"line":26,"column":47},"generated":{"line":1,"column":255}},{"source":"../src/setup.ts","name":null,"original":{"line":26,"column":44},"generated":{"line":1,"column":257}},{"source":"../src/setup.ts","name":null,"original":{"line":26,"column":49},"generated":{"line":1,"column":259}},{"source":"../src/setup.ts","name":null,"original":{"line":26,"column":53},"generated":{"line":1,"column":265}},{"source":"../src/setup.ts","name":null,"original":{"line":26,"column":58},"generated":{"line":1,"column":269}},{"source":"../src/setup.ts","name":null,"original":{"line":36,"column":6},"generated":{"line":1,"column":273}},{"source":"../src/setup.ts","name":null,"original":{"line":36,"column":16},"generated":{"line":1,"column":282}},{"source":"../src/setup.ts","name":null,"original":{"line":36,"column":32},"generated":{"line":1,"column":284}},{"source":"../src/setup.ts","name":null,"original":{"line":36,"column":49},"generated":{"line":1,"column":286}},{"source":"../src/setup.ts","name":null,"original":{"line":37,"column":6},"generated":{"line":1,"column":289}},{"source":"../src/setup.ts","name":null,"original":{"line":38,"column":11},"generated":{"line":1,"column":293}},{"source":"../src/setup.ts","name":null,"original":{"line":38,"column":11},"generated":{"line":1,"column":300}},{"source":"../src/setup.ts","name":null,"original":{"line":38,"column":15},"generated":{"line":1,"column":302}},{"source":"../src/setup.ts","name":null,"original":{"line":38,"column":21},"generated":{"line":1,"column":308}},{"source":"../src/setup.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":1,"column":311}},{"source":"../src/setup.ts","name":null,"original":{"line":39,"column":11},"generated":{"line":1,"column":317}},{"source":"../src/setup.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":1,"column":320}},{"source":"../src/setup.ts","name":null,"original":{"line":40,"column":12},"generated":{"line":1,"column":328}},{"source":"../src/setup.ts","name":null,"original":{"line":40,"column":18},"generated":{"line":1,"column":334}},{"source":"../src/setup.ts","name":null,"original":{"line":40,"column":44},"generated":{"line":1,"column":361}},{"source":"../src/setup.ts","name":null,"original":{"line":40,"column":44},"generated":{"line":1,"column":367}},{"source":"../src/setup.ts","name":null,"original":{"line":40,"column":47},"generated":{"line":1,"column":374}},{"source":"../src/setup.ts","name":null,"original":{"line":40,"column":44},"generated":{"line":1,"column":376}},{"source":"../src/setup.ts","name":null,"original":{"line":40,"column":49},"generated":{"line":1,"column":378}},{"source":"../src/setup.ts","name":null,"original":{"line":40,"column":53},"generated":{"line":1,"column":384}},{"source":"../src/setup.ts","name":null,"original":{"line":40,"column":58},"generated":{"line":1,"column":388}},{"source":"../src/setup.ts","name":null,"original":{"line":50,"column":6},"generated":{"line":1,"column":392}},{"source":"../src/setup.ts","name":null,"original":{"line":50,"column":16},"generated":{"line":1,"column":401}},{"source":"../src/setup.ts","name":null,"original":{"line":50,"column":27},"generated":{"line":1,"column":403}},{"source":"../src/setup.ts","name":null,"original":{"line":50,"column":39},"generated":{"line":1,"column":405}},{"source":"../src/setup.ts","name":null,"original":{"line":51,"column":6},"generated":{"line":1,"column":408}},{"source":"../src/setup.ts","name":null,"original":{"line":51,"column":6},"generated":{"line":1,"column":414}},{"source":"../src/setup.ts","name":null,"original":{"line":51,"column":18},"generated":{"line":1,"column":425}},{"source":"../src/setup.ts","name":null,"original":{"line":52,"column":11},"generated":{"line":1,"column":427}},{"source":"../src/setup.ts","name":null,"original":{"line":52,"column":27},"generated":{"line":1,"column":429}},{"source":"../src/setup.ts","name":null,"original":{"line":52,"column":32},"generated":{"line":1,"column":431}},{"source":"../src/setup.ts","name":null,"original":{"line":54,"column":11},"generated":{"line":1,"column":434}},{"source":"../src/setup.ts","name":null,"original":{"line":54,"column":28},"generated":{"line":1,"column":436}},{"source":"../src/setup.ts","name":null,"original":{"line":54,"column":33},"generated":{"line":1,"column":438}},{"source":"../src/setup.ts","name":null,"original":{"line":54,"column":44},"generated":{"line":1,"column":440}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":444}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":451}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":466}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":474}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":487}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":488}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":495}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":499}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":507}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":524}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":526}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":534}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":550}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":552}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":560}},{"source":"../src/setup.ts","name":null,"original":{"line":56,"column":1},"generated":{"line":1,"column":571}}],"sources":{"../src/setup.ts":"import type { PiletApi, PiletApiCreator, SinglePilet, MultiPilet, Pilet, PiralUnloadPiletEvent } from './types';\n\n/**\n * Sets up the given single pilet by calling the exported `setup`\n * function on the pilet with the created API.\n * @param app The pilet's evaluated content.\n * @param api The generated API for the pilet.\n */\nexport function setupSinglePilet(app: SinglePilet, api: PiletApi) {\n  try {\n    const result = app.setup(api);\n\n    if (typeof app.teardown === 'function') {\n      const evtName = 'unload-pilet';\n      const handler = (e: PiralUnloadPiletEvent) => {\n        if (e.name === app.name) {\n          api.off(evtName, handler);\n          app.teardown(api);\n        }\n      };\n      api.on(evtName, handler);\n    }\n\n    return result;\n  } catch (e) {\n    console.error(`Error while setting up ${app?.name}.`, e);\n  }\n}\n\n/**\n * Sets up the given multi pilet by calling the exported `setup`\n * function on the pilet with the API factory.\n * @param app The pilet's evaluated content.\n * @param apiFactory The API factory to be used in the bundle.\n */\nexport function setupMultiPilet(app: MultiPilet, apiFactory: PiletApiCreator) {\n  try {\n    return app.setup(apiFactory);\n  } catch (e) {\n    console.error(`Error while setting up ${app?.name}.`, e);\n  }\n}\n\n/**\n * Sets up the given pilet by calling the exported `setup` function\n * on the pilet.\n * @param app The pilet's evaluated content.\n * @param apiFactory The API factory to be used in the bundle.\n */\nexport function setupPilet(app: Pilet, apiFactory: PiletApiCreator) {\n  if ('bundle' in app) {\n    return setupMultiPilet(app, apiFactory);\n  } else {\n    return setupSinglePilet(app, apiFactory(app));\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"5324556d4ee052d5acd39daf4cdfd88d","cacheData":{"env":{}}}